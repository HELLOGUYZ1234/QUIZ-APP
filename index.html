<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quizify</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9fafb;
    }
    .question {
      font-weight: bold;
      margin: 15px 0 5px;
    }
    .options button {
      display: block;
      margin: 5px 0;
      padding: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background: #e5e7eb;
      width: 200px;
      text-align: left;
    }
    .options button:hover {
      background: #d1d5db;
    }
    .correct {
      color: #059669;
      font-weight: bold;
    }
    .incorrect {
      color: #b91c1c;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Welcome to Quizify üéâ</h1>
  <div id="quiz"></div>
  <h2 id="score"></h2>
  <h3>Leaderboard</h3>
  <ul id="leaderboard"></ul>

  <script>
    let score = 0;
    let userName = prompt("What's your name?");
    document.querySelector("h1").innerText = `Hello ${userName}, welcome to Quizify üéâ`;

    const database = {
      data: [
        {
          question: `let a = {}, b = {}
console.log(a == b)
console.log(a === b)`,
          options: {
            a: "false false",
            b: "false true",
            c: "true false",
            d: "true true",
          },
          correctAnswer: "a",
        },
        {
          question: "Object.assign(target, source) creates which type of copy?",
          options: {
            a: "Deep Copy",
            b: "Shallow Copy",
            c: "Nested Copy",
            d: "Creates a new reference",
          },
          correctAnswer: "b",
        },
        {
          question: "Is method chaining possible with forEach?",
          options: {
            a: "Yes",
            b: "No",
          },
          correctAnswer: "b",
        },
      ],
    };

    const leaderBoard = {
      data: [
        { name: "Ashish", score: 1 },
        { name: "Riya", score: 3 },
        { name: "Jay", score: 2 },
      ],
    };

    const quizContainer = document.getElementById("quiz");
    const scoreBoard = document.getElementById("score");
    const leaderBoardUI = document.getElementById("leaderboard");

    function playGame(userAnswer, correctAnswer, questionElement) {
      if (userAnswer === correctAnswer) {
        questionElement.innerHTML += `<p class="correct">‚úÖ Correct Answer</p>`;
        score++;
      } else {
        questionElement.innerHTML += `<p class="incorrect">‚ùå Incorrect Answer. Correct: ${correctAnswer}</p>`;
      }
      scoreBoard.innerText = `Your score is: ${score}`;
    }

    function showQuestionAndOptions() {
      database.data.forEach((q, i) => {
        const questionDiv = document.createElement("div");
        questionDiv.classList.add("question-block");
        questionDiv.innerHTML = `<div class="question">Q${i + 1}. ${q.question}</div>`;

        const optionsDiv = document.createElement("div");
        optionsDiv.classList.add("options");

        for (let key in q.options) {
          const button = document.createElement("button");
          button.innerText = `${key} - ${q.options[key]}`;
          button.onclick = () => {
            playGame(key, q.correctAnswer, questionDiv);
            [...optionsDiv.querySelectorAll("button")].forEach(btn => btn.disabled = true);
          };
          optionsDiv.appendChild(button);
        }

        questionDiv.appendChild(optionsDiv);
        quizContainer.appendChild(questionDiv);
      });
    }

    function showHighScorer() {
      leaderBoard.data.push({ name: userName, score: score });
      let sortedScoreList = leaderBoard.data.sort((a, b) => b.score - a.score);

      leaderBoardUI.innerHTML = "";
      sortedScoreList.forEach(leader => {
        const li = document.createElement("li");
        li.innerText = `${leader.name} - Score: ${leader.score}`;
        leaderBoardUI.appendChild(li);
      });
    }

    showQuestionAndOptions();

    // After answering all, show leaderboard when user scrolls
    window.onbeforeunload = () => showHighScorer();
  </script>
</body>
</html>
